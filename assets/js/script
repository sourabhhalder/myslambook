document.getElementById('slambookForm').addEventListener('submit', function(e) {
    // 1. STOP the page from refreshing
    e.preventDefault(); 

    // 2. Trigger the Success UI
    showPopup();

    // 3. Optional: Log the data to console (to see it's working)
    const formData = new FormData(this);
    console.log("Memory Captured!", Object.fromEntries(formData));
});

function showPopup() {
    const popup = document.getElementById('successPopup');
    popup.style.display = 'flex';

    // 4. Create the Confetti Explosion
    for (let i = 0; i < 60; i++) {
        createConfetti();
    }
}

function createConfetti() {
    const confetti = document.createElement('div');
    confetti.classList.add('confetti');
    
    // Randomize styling for that "Doodle Art" look
    const colors = ['#ff4791', '#00d2ff', '#7d5fff', '#3ae374', '#fff982'];
    const shapes = ['50%', '0%']; // Circles and Squares
    
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.borderRadius = shapes[Math.floor(Math.random() * shapes.length)];
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.width = Math.random() * 10 + 10 + 'px';
    confetti.style.height = confetti.style.width;
    
    // Vary the speed so it looks natural
    confetti.style.animationDuration = Math.random() * 2 + 3 + 's';
    confetti.style.opacity = Math.random();

    document.body.appendChild(confetti);

    // Clean up memory: Remove confetti after animation ends
    setTimeout(() => {
        confetti.remove();
    }, 4000);
}

function closePopup() {
    const popup = document.getElementById('successPopup');
    popup.style.display = 'none';
    
    // 5. Clear the form ONLY after the user closes the popup
    document.getElementById('slambookForm').reset();
}